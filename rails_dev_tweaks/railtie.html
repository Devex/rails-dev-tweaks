<!DOCTYPE html><html lang="en"><head><title>rails_dev_tweaks/railtie</title></head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0"><meta name="groc-relative-root" content="../"><meta name="groc-document-path" content="rails_dev_tweaks/railtie"><meta name="groc-project-path" content="lib/rails_dev_tweaks/railtie.rb"><meta name="groc-github-url" content="https://github.com/wavii/rails-dev-tweaks"><link rel="stylesheet" type="text/css" media="all" href="../assets/style.css"><script type="text/javascript" src="../assets/behavior.js"></script><body><div id="document"><div class="segment"><div class="code"><div class="wrapper"><span class="k">class</span> <span class="nc">RailsDevTweaks</span><span class="o">::</span><span class="no">Railtie</span> <span class="o">&lt;</span> <span class="no">Rails</span><span class="o">::</span><span class="no">Railtie</span>

  <span class="n">config</span><span class="o">.</span><span class="n">dev_tweaks</span> <span class="o">=</span> <span class="no">RailsDevTweaks</span><span class="o">::</span><span class="no">Configuration</span><span class="o">.</span><span class="n">new</span>

  <span class="n">config</span><span class="o">.</span><span class="n">before_initialize</span> <span class="k">do</span> <span class="o">|</span><span class="n">app</span><span class="o">|</span></div></div></div><div class="segment"><div class="comments"><div class="wrapper"><p>We can't inspect the stack because it's deferred...  For now, just assume we have it when config.cache_clasess is
falsy; which should always be the case in the current version of rails anyway.</p></div></div><div class="code"><div class="wrapper">    <span class="k">unless</span> <span class="n">app</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">cache_classes</span>
      <span class="n">app</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">middleware</span><span class="o">.</span><span class="n">swap</span> <span class="no">ActionDispatch</span><span class="o">::</span><span class="no">Reloader</span><span class="p">,</span> <span class="no">RailsDevTweaks</span><span class="o">::</span><span class="no">GranularAutoload</span><span class="o">::</span><span class="no">Middleware</span>
    <span class="k">end</span>
  <span class="k">end</span>

<span class="k">end</span></div></div></div></div></body></html>